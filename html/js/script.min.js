function qa(t){return document.querySelectorAll(t)}function q(t){return document.querySelector(t)}function OpenDownList(){q(".downlist-cover").style.display="block",setTimeout(()=>{q(".downlist-cover").style.opacity=1,q(".downlist-window").style.top="15%"},50)}function CloseDownList(){q(".downlist-cover").style.opacity=0,q(".downlist-window").style.top="calc(15% + 2rem)",setTimeout(()=>{q(".downlist-cover").style.display="none"},500)}function RequireScan(){fetch("/scan")}function HTMLEncode(t){var e=document.createElement("div");null!=e.textContent?e.textContent=t:e.innerText=t;var o=e.innerHTML;return e=null,o}function ClearVideos(){shown_videos=[],e=qa(".item");for(var t=1;t<e.length;t++)e[t].remove()}function AddVideo(t,e){if(!shown_videos.includes(t)){id=++count;var o=document.createElement("div");o.setAttribute("class","item"),o.style.opacity="0",o.style.height="0";for(var i=[],n=0;n<e.length;n++)i.push(HTMLEncode(e[n]));o.innerHTML='<input type="checkbox" class="select-vid"><div class="vid-container"><video-js oncontextmenu="return false" controls id="video'+id+'"><source src="'+t+'"></video-js></div><div class="item-opt"><div class="filename"></div><input class="input-filename" list="list'+id+'"><datalist id="list'+id+'"><option>'+i.join("</option><option>")+'</option></datalist><div class="fileext"></div><select class="select-fileext"><option>.mp4</option><option>.mkv</option><option>.m4v</option><option>.flv</option></select><button class="btn">Download</button>',q(".content").appendChild(o),shown_videos.push(t),videojs("video"+id),setTimeout(()=>{o.style.opacity="1",o.style.height=""},50)}}function GetVideos(t=!0){fetch("/get-titles").then(t=>t.json()).then(e=>{for(var o in e)AddVideo(o,e[o]);t&&setTimeout(GetVideos,500)})}function StartModify(){modifying=!0,clearTimeout(modify_timeout),q(".delay-int").style.boxShadow="0 0 2px 2px #e04",modify_timeout=setTimeout(StopModify,1e4)}function StopModify(){ChangeDelayTime(),modifying=!1,clearTimeout(modify_timeout),q(".delay-int").style.boxShadow=""}function RefreshStatus(){fetch("/get-status").then(t=>t.json(),()=>{setTimeout(RefreshStatus,300)}).then(t=>{q(".conf-panel>.check-big").checked=t.autoscan,modifying||(q(".delay-int").value=t.wait_interval),setTimeout(RefreshStatus,300)})}function SwitchAutoScan(){fetch(q(".conf-panel>.check-big").checked?"/enable-autoscan":"/disable-autoscan")}function ChangeDelayTime(){fetch("/set-autoscan-delay",{method:"POST",body:q(".delay-int").value.toString()})}var count=0,shown_videos=[];GetVideos();var modifying=!1,modify_timeout=0;RefreshStatus();